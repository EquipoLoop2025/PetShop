<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>CATALOGO DE PETSHOP</title>
    <style>
    .spinner {
      width: 50px;
      height: 50px;
      border: 6px solid #ccc;
      border-top: 6px solid #007bff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 20px auto;
      display: none;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

      #mensaje-vacio {
      display: none;
      color: red;
      text-align: center;
      font-weight: bold;
      margin-top: 20px;
    }

    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .fade-in {
      animation: fadeIn 0.5s ease forwards;
    }
          #modal {
        display: none;
        position: fixed;
        top: 0; left: 0;
        width: 100vw; height: 100vh;
        background: rgba(0,0,0,0.7);
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }

      #modal > div {
        background: #fff;
        padding: 20px;
        max-width: 400px;
        width: 90%;
        border-radius: 8px;
        position: relative;
        box-sizing: border-box;
      }

      #cerrarModal {
        position: absolute;
        top: 10px; right: 10px;
        cursor: pointer;
        font-size: 18px;
        border: none;
        background: transparent;
      }

      #modalImagen {
        width: 100%;
        max-height: 250px;
        object-fit: contain;
        margin-bottom: 10px;
      }
  </style>
</head>
<body>
    <h1>catalogo de el petshop</h1>

    
<input type="text" id="buscador" placeholder="Buscar Alimentos..." onkeyup="filtrarAlimentos()">3   

 <label>Categoría:
    <select id="categoria" onchange="filtrarAlimentos()">
      <option value="">Todas</option>
      <option value="adulto">Adulto</option>
      <option value="cachorro">Cachorro</option>
      <option value="senior">Viejo</option>
    </select>
  </label>

  <label>Precio mínimo:
    <input type="number" id="precioMin" oninput="filtrarAlimentos()">
  </label>

  <label>Precio máximo:
    <input type="number" id="precioMax" oninput="filtrarAlimentos()">
  </label>

  <label>Orden:
    <select id="orden" onchange="filtrarAlimentos()">
      <option value="az">A-Z</option>
      <option value="za">Z-A</option>
    </select>
  </label>

<p id="mensaje-vacio" style="display: none; color: red;">No se encontraron productos.</p>

<div id="loader" class="spinner"></div>

<div id="lista-Alimentos">
    <div class="Alimentos" data-categoria="cachorro" data-precio="10000">
         <h2>Alimento pe</h2>
         <img src="https://i5-mx.walmartimages.com/gr/images/product-images/img_large/00002310004103L.jpg" alt="Alimento pe">
         <p>Alimento para perros cachorros 5kg</p>
         <p>10000</p>
    </div>
    <div class="Alimentos" data-categoria="adulto" data-precio="20000">
         <h2>Alimento pe</h2>
         <img src="https://i5-mx.walmartimages.com/mg/gm/1p/images/product-images/img_large/00750617451243l.jpg" alt="Alimento pe">
         <p>Alimento para perros adulto 17kg +2kg gartis</p>
         <p>20000</p>
    </div>
    <div class="Alimentos" data-categoria="cachorro" data-precio="9000">
         <h2>Alimento pe</h2>
         <img src="https://i5-mx.walmartimages.com/gr/images/product-images/img_large/00002310004103L.jpg" alt="Alimento pe">
         <p>Alimento para perros cachorros 2kg</p>
         <p>9000</p>
    </div>
</div> 

<div id="modal">
    <div>
      <button id="cerrarModal">✖</button>
      <h2 id="modalNombre"></h2>
      <img id="modalImagen" src="" alt="" />
      <p id="modalDescripcion"></p>
      <p>
        <strong>Precio: </strong><span id="modalPrecio"></span>
      </p>
    </div>
  </div>
  <script>
    window.addEventListener("load", () => {
      const loader = document.getElementById("loader");
      loader.style.display = "block";

      setTimeout(() => {
        loader.style.display = "none";
        filtrarAlimentos();
        configurarModal(); 
      }, 1000);
    });

    function filtrarAlimentos() {
      const loader = document.getElementById("loader");
      const productos = Array.from(document.querySelectorAll("#lista-Alimentos .Alimentos"));
      const mensaje = document.getElementById("mensaje-vacio");

      loader.style.display = "block";
      productos.forEach((p) => {
        p.style.display = "none";
        p.classList.remove("fade-in");
      });
      mensaje.style.display = "none";

      setTimeout(() => {
        const input = document.getElementById("buscador").value.toLowerCase();
        const categoria = document.getElementById("categoria").value;
        const precioMin = parseFloat(document.getElementById("precioMin").value) || 0;
        const precioMax = parseFloat(document.getElementById("precioMax").value) || Infinity;
        const orden = document.getElementById("orden").value;

        let filtrados = productos.filter((p) => {
          const nombre = p.querySelector("h2").textContent.toLowerCase();
          const cat = p.getAttribute("data-categoria");
          const precio = parseFloat(p.getAttribute("data-precio"));
          return (
            nombre.includes(input) &&
            (!categoria || cat === categoria) &&
            precio >= precioMin && precio <= precioMax
          );
        });

        filtrados.sort((a, b) => {
          const nombreA = a.querySelector("h2").textContent.toLowerCase();
          const nombreB = b.querySelector("h2").textContent.toLowerCase();
          return orden === "az"
            ? nombreA.localeCompare(nombreB)
            : nombreB.localeCompare(nombreA);
        });

        if (filtrados.length === 0) {
          mensaje.style.display = "block";
        } else {
          mensaje.style.display = "none";
          filtrados.forEach((p) => {
            p.style.display = "block";
            p.classList.add("fade-in");
          });
        }

        loader.style.display = "none";
        configurarModal(); 
      }, 500);
    }

    function configurarModal() {
      const productos = document.querySelectorAll("#lista-Alimentos .Alimentos");
      const modal = document.getElementById("modal");
      const modalNombre = document.getElementById("modalNombre");
      const modalImagen = document.getElementById("modalImagen");
      const modalDescripcion = document.getElementById("modalDescripcion");
      const modalPrecio = document.getElementById("modalPrecio");
      const cerrarModal = document.getElementById("cerrarModal");

      productos.forEach((producto) => {
        producto.style.cursor = "pointer";
        producto.onclick = () => {
          modalNombre.textContent = producto.querySelector("h2").textContent;
          modalImagen.src = producto.querySelector("img").src;
          modalDescripcion.textContent = producto.querySelectorAll("p")[0].textContent;
          modalPrecio.textContent = producto.querySelectorAll("p")[1].textContent;
          modal.style.display = "flex";
        };
      });

      cerrarModal.onclick = () => {
        modal.style.display = "none";
      };

      modal.onclick = (e) => {
        if (e.target === modal) {
          modal.style.display = "none";
        }
      };
    }
  </script>
  </body>    
</html>