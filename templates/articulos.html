<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Mis Productos</title>
</head>
<body>

  <h1 style="text-align:center;">Productos</h1>

  <div style="text-align:center; margin: 20px;">
    <button id="agregar-producto-btn">Agregar nuevo producto</button>
  </div>

<div style="text-align:center; margin: 10px;">
  <input type="text" id="nombre" placeholder="Nombre del producto">
  <input type="number" id="precio" placeholder="Precio">
  <input type="text" id="imagen" placeholder="URL de imagen">
</div>

  <div style="text-align:center; margin: 10px;">
    <label for="ordenar">Ordenar por:</label>
    <select id="ordenar">
      <option value="">Seleccionar</option>
      <option value="menor">Precio: Menor a mayor</option>
      <option value="mayor">Precio: Mayor a menor</option>
    </select>
  </div>

  <p id="mensaje-vacio" style="text-align:center; color: #555;">
    Lista vacía (aún no hay productos)
  </p>

  <div class="grilla">
    <div class="tarjeta">
      <img src="https://i.pinimg.com/736x/4d/de/60/4dde60e480597f79ab30181d2c98f855.jpg" alt="collar para perros con pinchos">
      <h3>Collar perro con pinchos</h3>
      <p>$1000</p>
      <div>
        <button>Editar</button>
        <button>Eliminar</button>
      </div>
    </div>

    <div class="tarjeta">
      <img src="https://http2.mlstatic.com/D_NQ_NP_809006-MLA76902958522_062024-O.webp" alt="pechera para perros">
      <h3>Pechera para perros</h3>
      <p>$2500</p>
      <div>
        <button>Editar</button>
        <button>Eliminar</button>
      </div>
    </div>

    <div class="tarjeta">
      <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSnt1T7NLPRcJ_LkQvkkzC0vg0XWiFhjKtGpA&s" alt="soga para perros">
      <h3>Soga para perros</h3>
      <p>$3000</p>
      <div>
        <button>Editar</button>
        <button>Eliminar</button>
      </div>
    </div>
  </div>

  <script>
  

  function verificarLista() {
    const grilla = document.querySelector('.grilla');
    const mensaje = document.getElementById('mensaje-vacio');
    if (grilla.children.length === 0) {
      mensaje.style.display = 'block';
    } else {
      mensaje.style.display = 'none';
    }
  }

  verificarLista();

  const selectOrdenar = document.getElementById('ordenar');
  selectOrdenar.addEventListener('change', ordenarProductos);

  function ordenarProductos() {
    const grilla = document.querySelector('.grilla');
    const tarjetas = Array.from(grilla.querySelectorAll('.tarjeta'));

    if (selectOrdenar.value === 'menor') {
      tarjetas.sort((a, b) => {
        const precioA = parseInt(a.querySelector('p').textContent.replace('$', ''));
        const precioB = parseInt(b.querySelector('p').textContent.replace('$', ''));
        return precioA - precioB;
      });
    } else if (selectOrdenar.value === 'mayor') {
      tarjetas.sort((a, b) => {
        const precioA = parseInt(a.querySelector('p').textContent.replace('$', ''));
        const precioB = parseInt(b.querySelector('p').textContent.replace('$', ''));
        return precioB - precioA;
      });
    }

    tarjetas.forEach(tarjeta => grilla.appendChild(tarjeta));
  }

  let tarjetaEditando = null;

document.getElementById('agregar-producto-btn').addEventListener('click', function () {
  const nombre = document.getElementById('nombre').value.trim();
  const precio = document.getElementById('precio').value.trim();
  const imagen = document.getElementById('imagen').value.trim();

  if (!nombre || !precio || !imagen) {
    alert('Por favor completá todos los campos.');
    return;
  }

  if (tarjetaEditando) {
    
    tarjetaEditando.querySelector('img').src = imagen;
    tarjetaEditando.querySelector('img').alt = nombre;
    tarjetaEditando.querySelector('h3').textContent = nombre;
    tarjetaEditando.querySelector('p').textContent = `$${precio}`;
    tarjetaEditando = null;
    this.textContent = 'Agregar nuevo producto';
  } else {
    
    const tarjeta = document.createElement('div');
    tarjeta.className = 'tarjeta';

    tarjeta.innerHTML = `
      <img src="${imagen}" alt="${nombre}">
      <h3>${nombre}</h3>
      <p>$${precio}</p>
      <div>
        <button>Editar</button>
        <button>Eliminar</button>
      </div>
    `;

    document.querySelector('.grilla').appendChild(tarjeta);
  }

  verificarLista();

  
  document.getElementById('nombre').value = '';
  document.getElementById('precio').value = '';
  document.getElementById('imagen').value = '';
});



  
  document.querySelector('.grilla').addEventListener('click', function (e) {
   document.querySelector('.grilla').addEventListener('click', function (e) {
  
  if (e.target.textContent === 'Eliminar') {
    e.target.closest('.tarjeta').remove();
    verificarLista();
  }

  
  if (e.target.textContent === 'Editar') {
    const tarjeta = e.target.closest('.tarjeta');
    const nombre = tarjeta.querySelector('h3').textContent;
    const precio = tarjeta.querySelector('p').textContent.replace('$', '');
    const imagen = tarjeta.querySelector('img').src;

    document.getElementById('nombre').value = nombre;
    document.getElementById('precio').value = precio;
    document.getElementById('imagen').value = imagen;

    tarjetaEditando = tarjeta;
    document.getElementById('agregar-producto-btn').textContent = 'Guardar cambios';
  }
});

    if (e.target.textContent === 'Eliminar') {
      e.target.closest('.tarjeta').remove();
      verificarLista();
    }

  });
</script>

</body>
</html>